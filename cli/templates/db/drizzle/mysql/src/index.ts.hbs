{{#if (or (eq runtime "bun") (eq runtime "node") (eq runtime "none"))}}
import { env } from "@{{projectName}}/env/server";
import * as schema from "./schema";

{{#if (eq dbSetup "planetscale")}}
import { drizzle } from "drizzle-orm/planetscale-serverless";

export const db = drizzle({
	connection: {
		host: env.DATABASE_HOST,
		username: env.DATABASE_USERNAME,
		password: env.DATABASE_PASSWORD,
	},
	schema,
});
{{else}}
import { drizzle } from "drizzle-orm/mysql2";

export const db = drizzle({
	connection: {
		uri: env.DATABASE_URL,
	},
	schema,
});
{{/if}}
{{/if}}

{{#if (eq runtime "workers")}}
import * as schema from "./schema";

{{#if (eq dbSetup "planetscale")}}
import { drizzle } from "drizzle-orm/planetscale-serverless";
import { env } from "@{{projectName}}/env/server";

export const db = drizzle({
	connection: {
		host: env.DATABASE_HOST,
		username: env.DATABASE_USERNAME,
		password: env.DATABASE_PASSWORD,
	},
	schema,
});
{{else}}
import { drizzle } from "drizzle-orm/mysql2";
import { env } from "@{{projectName}}/env/server";

export const db = drizzle({
	connection: {
		uri: env.DATABASE_URL,
	},
	schema,
});
{{/if}}
{{/if}}
